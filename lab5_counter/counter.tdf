PARAMETERS (MAX_N = 13);
CONSTANT WIDTH = CEIL(LOG2(MAX_N));
SUBDESIGN counter
(
	clk				: INPUT;
	R				: INPUT = GND;
	out[WIDTH..1], cout	: OUTPUT;
)
VARIABLE
	ff[WIDTH..1]	: DFF;
BEGIN
	ff[].(CLK, CLRn) = (clk, not R);
	IF ff[].Q == MAX_N - 1 THEN
		cout = VCC;
		ff[] = 0;
	ELSE
		ff[].D = ff[].Q + 1;
	END IF;
	out[] = ff[].Q;
END;


