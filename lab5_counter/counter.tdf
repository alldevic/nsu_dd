PARAMETERS (MAX_N = 6);
CONSTANT WIDTH = CEIL(LOG2(MAX_N));
SUBDESIGN counter
(
	clk, R			: INPUT;
	out[WIDTH..0]	: OUTPUT;
)
VARIABLE
	ff[WIDTH..0]	: TFF;
BEGIN
	ff[WIDTH-1..0].t = ff[WIDTH..1].q;
	ff[WIDTH] = R;
	ff[].clk = clk;
	out[WIDTH..0] = ff[0..WIDTH].q;
END;


